name: Custom Discord Message

on:
  pull_request:
    types: [opened]

jobs:
  notify-discord:
    runs-on: ubuntu-latest
    steps:
      - name: Send to Discord
        run: |
          PR_TITLE="${{ github.event.pull_request.title }}"
          PR_DESCRIPTION="${{ github.event.pull_request.body }}"
          REPO_URL="${{ github.server_url }}/${{ github.repository }}"
          
          # –§–æ—Ä–º–∏—Ä—É–µ–º JSON –¥–ª—è Discord webhook
          curl -H "Content-Type: application/json" \
          -X POST \
          -d '{
            "username": "GitHub Bot",
            "avatar_url": "https://github.com/github.png",
            "embeds": [{
              "title": "üöÄ New Pull Request",
              "description": "**Author**: ${{ github.actor }}\n**'"PR_TITLE"'**\n'"PR_DESCRIPTION"'",
              "url": "'"$REPO_URL"'",
              "color": 3066993,
              "timestamp": "'"$(date -u +%Y-%m-%dT%H:%M:%SZ)"'"
            }]
          }' ${{ secrets.DISCORD_WEBHOOK_URL }}
